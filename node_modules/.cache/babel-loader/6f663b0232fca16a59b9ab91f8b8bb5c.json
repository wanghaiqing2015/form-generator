{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\form-generator\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Administrator\\Desktop\\form-generator\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\Users\\Administrator\\Desktop\\form-generator\\src\\utils\\loadScript.js","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\form-generator\\src\\utils\\loadScript.js","mtime":1619538169718},{"path":"C:\\Users\\Administrator\\Desktop\\form-generator\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\form-generator\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\Administrator\\Desktop\\form-generator\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyI7CnZhciBjYWxsYmFja3MgPSB7fTsKLyoqCiAqIOWKoOi9veS4gOS4qui/nOeoi+iEmuacrAogKiBAcGFyYW0ge1N0cmluZ30gc3JjIOS4gOS4qui/nOeoi+iEmuacrAogKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFjayDlm57osIMKICovCgpmdW5jdGlvbiBsb2FkU2NyaXB0KHNyYywgY2FsbGJhY2spIHsKICB2YXIgZXhpc3RpbmdTY3JpcHQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChzcmMpOwoKICB2YXIgY2IgPSBjYWxsYmFjayB8fCBmdW5jdGlvbiAoKSB7fTsKCiAgaWYgKCFleGlzdGluZ1NjcmlwdCkgewogICAgY2FsbGJhY2tzW3NyY10gPSBbXTsKICAgIHZhciAkc2NyaXB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7CiAgICAkc2NyaXB0LnNyYyA9IHNyYzsKICAgICRzY3JpcHQuaWQgPSBzcmM7CiAgICAkc2NyaXB0LmFzeW5jID0gMTsKICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoJHNjcmlwdCk7CiAgICB2YXIgb25FbmQgPSAnb25sb2FkJyBpbiAkc2NyaXB0ID8gc3RkT25FbmQuYmluZCgkc2NyaXB0KSA6IGllT25FbmQuYmluZCgkc2NyaXB0KTsKICAgIG9uRW5kKCRzY3JpcHQpOwogIH0KCiAgY2FsbGJhY2tzW3NyY10ucHVzaChjYik7CgogIGZ1bmN0aW9uIHN0ZE9uRW5kKHNjcmlwdCkgewogICAgdmFyIF90aGlzID0gdGhpczsKCiAgICBzY3JpcHQub25sb2FkID0gZnVuY3Rpb24gKCkgewogICAgICBfdGhpcy5vbmVycm9yID0gX3RoaXMub25sb2FkID0gbnVsbDsKICAgICAgY2FsbGJhY2tzW3NyY10uZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgIGl0ZW0obnVsbCwgc2NyaXB0KTsKICAgICAgfSk7CiAgICAgIGRlbGV0ZSBjYWxsYmFja3Nbc3JjXTsKICAgIH07CgogICAgc2NyaXB0Lm9uZXJyb3IgPSBmdW5jdGlvbiAoKSB7CiAgICAgIF90aGlzLm9uZXJyb3IgPSBfdGhpcy5vbmxvYWQgPSBudWxsOwogICAgICBjYihuZXcgRXJyb3IoIkZhaWxlZCB0byBsb2FkICIuY29uY2F0KHNyYykpLCBzY3JpcHQpOwogICAgfTsKICB9CgogIGZ1bmN0aW9uIGllT25FbmQoc2NyaXB0KSB7CiAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICBzY3JpcHQub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gKCkgewogICAgICBpZiAoX3RoaXMyLnJlYWR5U3RhdGUgIT09ICdjb21wbGV0ZScgJiYgX3RoaXMyLnJlYWR5U3RhdGUgIT09ICdsb2FkZWQnKSByZXR1cm47CiAgICAgIF90aGlzMi5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBudWxsOwogICAgICBjYWxsYmFja3Nbc3JjXS5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgaXRlbShudWxsLCBzY3JpcHQpOwogICAgICB9KTsKICAgICAgZGVsZXRlIGNhbGxiYWNrc1tzcmNdOwogICAgfTsKICB9Cn0KLyoqCiAqIOmhuuW6j+WKoOi9veS4gOe7hOi/nOeoi+iEmuacrAogKiBAcGFyYW0ge0FycmF5fSBsaXN0IOS4gOe7hOi/nOeoi+iEmuacrAogKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYiDlm57osIMKICovCgoKZXhwb3J0IGZ1bmN0aW9uIGxvYWRTY3JpcHRRdWV1ZShsaXN0LCBjYikgewogIHZhciBmaXJzdCA9IGxpc3Quc2hpZnQoKTsKICBsaXN0Lmxlbmd0aCA/IGxvYWRTY3JpcHQoZmlyc3QsIGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiBsb2FkU2NyaXB0UXVldWUobGlzdCwgY2IpOwogIH0pIDogbG9hZFNjcmlwdChmaXJzdCwgY2IpOwp9CmV4cG9ydCBkZWZhdWx0IGxvYWRTY3JpcHQ7"},{"version":3,"sources":["C:/Users/Administrator/Desktop/form-generator/src/utils/loadScript.js"],"names":["callbacks","loadScript","src","callback","existingScript","document","getElementById","cb","$script","createElement","id","async","body","appendChild","onEnd","stdOnEnd","bind","ieOnEnd","push","script","onload","onerror","forEach","item","Error","onreadystatechange","readyState","loadScriptQueue","list","first","shift","length"],"mappings":";AAAA,IAAMA,SAAS,GAAG,EAAlB;AAEA;AACA;AACA;AACA;AACA;;AACA,SAASC,UAAT,CAAoBC,GAApB,EAAyBC,QAAzB,EAAmC;AACjC,MAAMC,cAAc,GAAGC,QAAQ,CAACC,cAAT,CAAwBJ,GAAxB,CAAvB;;AACA,MAAMK,EAAE,GAAGJ,QAAQ,IAAK,YAAM,CAAE,CAAhC;;AACA,MAAI,CAACC,cAAL,EAAqB;AACnBJ,IAAAA,SAAS,CAACE,GAAD,CAAT,GAAiB,EAAjB;AACA,QAAMM,OAAO,GAAGH,QAAQ,CAACI,aAAT,CAAuB,QAAvB,CAAhB;AACAD,IAAAA,OAAO,CAACN,GAAR,GAAcA,GAAd;AACAM,IAAAA,OAAO,CAACE,EAAR,GAAaR,GAAb;AACAM,IAAAA,OAAO,CAACG,KAAR,GAAgB,CAAhB;AACAN,IAAAA,QAAQ,CAACO,IAAT,CAAcC,WAAd,CAA0BL,OAA1B;AACA,QAAMM,KAAK,GAAG,YAAYN,OAAZ,GAAsBO,QAAQ,CAACC,IAAT,CAAcR,OAAd,CAAtB,GAA+CS,OAAO,CAACD,IAAR,CAAaR,OAAb,CAA7D;AACAM,IAAAA,KAAK,CAACN,OAAD,CAAL;AACD;;AAEDR,EAAAA,SAAS,CAACE,GAAD,CAAT,CAAegB,IAAf,CAAoBX,EAApB;;AAEA,WAASQ,QAAT,CAAkBI,MAAlB,EAA0B;AAAA;;AACxBA,IAAAA,MAAM,CAACC,MAAP,GAAgB,YAAM;AACpB,MAAA,KAAI,CAACC,OAAL,GAAe,KAAI,CAACD,MAAL,GAAc,IAA7B;AACApB,MAAAA,SAAS,CAACE,GAAD,CAAT,CAAeoB,OAAf,CAAuB,UAAAC,IAAI,EAAI;AAC7BA,QAAAA,IAAI,CAAC,IAAD,EAAOJ,MAAP,CAAJ;AACD,OAFD;AAGA,aAAOnB,SAAS,CAACE,GAAD,CAAhB;AACD,KAND;;AAOAiB,IAAAA,MAAM,CAACE,OAAP,GAAiB,YAAM;AACrB,MAAA,KAAI,CAACA,OAAL,GAAe,KAAI,CAACD,MAAL,GAAc,IAA7B;AACAb,MAAAA,EAAE,CAAC,IAAIiB,KAAJ,0BAA4BtB,GAA5B,EAAD,EAAqCiB,MAArC,CAAF;AACD,KAHD;AAID;;AAED,WAASF,OAAT,CAAiBE,MAAjB,EAAyB;AAAA;;AACvBA,IAAAA,MAAM,CAACM,kBAAP,GAA4B,YAAM;AAChC,UAAI,MAAI,CAACC,UAAL,KAAoB,UAApB,IAAkC,MAAI,CAACA,UAAL,KAAoB,QAA1D,EAAoE;AACpE,MAAA,MAAI,CAACD,kBAAL,GAA0B,IAA1B;AACAzB,MAAAA,SAAS,CAACE,GAAD,CAAT,CAAeoB,OAAf,CAAuB,UAAAC,IAAI,EAAI;AAC7BA,QAAAA,IAAI,CAAC,IAAD,EAAOJ,MAAP,CAAJ;AACD,OAFD;AAGA,aAAOnB,SAAS,CAACE,GAAD,CAAhB;AACD,KAPD;AAQD;AACF;AAED;AACA;AACA;AACA;AACA;;;AACA,OAAO,SAASyB,eAAT,CAAyBC,IAAzB,EAA+BrB,EAA/B,EAAmC;AACxC,MAAMsB,KAAK,GAAGD,IAAI,CAACE,KAAL,EAAd;AACAF,EAAAA,IAAI,CAACG,MAAL,GAAc9B,UAAU,CAAC4B,KAAD,EAAQ;AAAA,WAAMF,eAAe,CAACC,IAAD,EAAOrB,EAAP,CAArB;AAAA,GAAR,CAAxB,GAAmEN,UAAU,CAAC4B,KAAD,EAAQtB,EAAR,CAA7E;AACD;AAED,eAAeN,UAAf","sourcesContent":["const callbacks = {}\n\n/**\n * 加载一个远程脚本\n * @param {String} src 一个远程脚本\n * @param {Function} callback 回调\n */\nfunction loadScript(src, callback) {\n  const existingScript = document.getElementById(src)\n  const cb = callback || (() => {})\n  if (!existingScript) {\n    callbacks[src] = []\n    const $script = document.createElement('script')\n    $script.src = src\n    $script.id = src\n    $script.async = 1\n    document.body.appendChild($script)\n    const onEnd = 'onload' in $script ? stdOnEnd.bind($script) : ieOnEnd.bind($script)\n    onEnd($script)\n  }\n\n  callbacks[src].push(cb)\n\n  function stdOnEnd(script) {\n    script.onload = () => {\n      this.onerror = this.onload = null\n      callbacks[src].forEach(item => {\n        item(null, script)\n      })\n      delete callbacks[src]\n    }\n    script.onerror = () => {\n      this.onerror = this.onload = null\n      cb(new Error(`Failed to load ${src}`), script)\n    }\n  }\n\n  function ieOnEnd(script) {\n    script.onreadystatechange = () => {\n      if (this.readyState !== 'complete' && this.readyState !== 'loaded') return\n      this.onreadystatechange = null\n      callbacks[src].forEach(item => {\n        item(null, script)\n      })\n      delete callbacks[src]\n    }\n  }\n}\n\n/**\n * 顺序加载一组远程脚本\n * @param {Array} list 一组远程脚本\n * @param {Function} cb 回调\n */\nexport function loadScriptQueue(list, cb) {\n  const first = list.shift()\n  list.length ? loadScript(first, () => loadScriptQueue(list, cb)) : loadScript(first, cb)\n}\n\nexport default loadScript\n"]}]}