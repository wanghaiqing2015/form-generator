{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\form-generator\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Administrator\\Desktop\\form-generator\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\Users\\Administrator\\Desktop\\form-generator\\src\\views\\preview\\main.js","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\form-generator\\src\\views\\preview\\main.js","mtime":1619538169726},{"path":"C:\\Users\\Administrator\\Desktop\\form-generator\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\form-generator\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\Administrator\\Desktop\\form-generator\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJDOlxcVXNlcnNcXEFkbWluaXN0cmF0b3JcXERlc2t0b3BcXGZvcm0tZ2VuZXJhdG9yXFxub2RlX21vZHVsZXNcXGNvcmUtanNcXG1vZHVsZXNcXGVzLmFycmF5Lml0ZXJhdG9yLmpzIjsKaW1wb3J0ICJDOlxcVXNlcnNcXEFkbWluaXN0cmF0b3JcXERlc2t0b3BcXGZvcm0tZ2VuZXJhdG9yXFxub2RlX21vZHVsZXNcXGNvcmUtanNcXG1vZHVsZXNcXGVzLnByb21pc2UuanMiOwppbXBvcnQgIkM6XFxVc2Vyc1xcQWRtaW5pc3RyYXRvclxcRGVza3RvcFxcZm9ybS1nZW5lcmF0b3JcXG5vZGVfbW9kdWxlc1xcY29yZS1qc1xcbW9kdWxlc1xcZXMub2JqZWN0LmFzc2lnbi5qcyI7CmltcG9ydCAiQzpcXFVzZXJzXFxBZG1pbmlzdHJhdG9yXFxEZXNrdG9wXFxmb3JtLWdlbmVyYXRvclxcbm9kZV9tb2R1bGVzXFxjb3JlLWpzXFxtb2R1bGVzXFxlcy5wcm9taXNlLmZpbmFsbHkuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0LmpzIjsKaW1wb3J0IFZ1ZSBmcm9tICd2dWUnOwppbXBvcnQgeyBsb2FkU2NyaXB0UXVldWUgfSBmcm9tICdAL3V0aWxzL2xvYWRTY3JpcHQnOwppbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnOwppbXBvcnQgVGlueW1jZSBmcm9tICdAL2NvbXBvbmVudHMvdGlueW1jZS9pbmRleC52dWUnOwpWdWUuY29tcG9uZW50KCd0aW55bWNlJywgVGlueW1jZSk7ClZ1ZS5wcm90b3R5cGUuJGF4aW9zID0gYXhpb3M7CnZhciAkcHJldmlld0FwcCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcmV2aWV3QXBwJyk7CnZhciBjaGlsZEF0dHJzID0gewogIGZpbGU6ICcnLAogIGRpYWxvZzogJyB3aWR0aD0iNjAwcHgiIGNsYXNzPSJkaWFsb2ctd2lkdGgiIHYtaWY9InZpc2libGUiIDp2aXNpYmxlLnN5bmM9InZpc2libGUiIDptb2RhbC1hcHBlbmQtdG8tYm9keT0iZmFsc2UiICcKfTsKd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCBpbml0LCBmYWxzZSk7CgpmdW5jdGlvbiBidWlsZExpbmtzKGxpbmtzKSB7CiAgdmFyIHN0cnMgPSAnJzsKICBsaW5rcy5mb3JFYWNoKGZ1bmN0aW9uICh1cmwpIHsKICAgIHN0cnMgKz0gIjxsaW5rIGhyZWY9XCIiLmNvbmNhdCh1cmwsICJcIiByZWw9XCJzdHlsZXNoZWV0XCI+Iik7CiAgfSk7CiAgcmV0dXJuIHN0cnM7Cn0KCmZ1bmN0aW9uIGluaXQoZXZlbnQpIHsKICBpZiAoZXZlbnQuZGF0YS50eXBlID09PSAncmVmcmVzaEZyYW1lJykgewogICAgdmFyIGNvZGUgPSBldmVudC5kYXRhLmRhdGE7CiAgICB2YXIgYXR0cnMgPSBjaGlsZEF0dHJzW2NvZGUuZ2VuZXJhdGVDb25mLnR5cGVdOwogICAgdmFyIGxpbmtzID0gJyc7CgogICAgaWYgKEFycmF5LmlzQXJyYXkoY29kZS5saW5rcykgJiYgY29kZS5saW5rcy5sZW5ndGggPiAwKSB7CiAgICAgIGxpbmtzID0gYnVpbGRMaW5rcyhjb2RlLmxpbmtzKTsKICAgIH0KCiAgICAkcHJldmlld0FwcC5pbm5lckhUTUwgPSAiIi5jb25jYXQobGlua3MsICI8c3R5bGU+IikuY29uY2F0KGNvZGUuY3NzLCAiPC9zdHlsZT48ZGl2IGlkPVwiYXBwXCI+PC9kaXY+Iik7CgogICAgaWYgKEFycmF5LmlzQXJyYXkoY29kZS5zY3JpcHRzKSAmJiBjb2RlLnNjcmlwdHMubGVuZ3RoID4gMCkgewogICAgICBsb2FkU2NyaXB0UXVldWUoY29kZS5zY3JpcHRzLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgbmV3VnVlKGF0dHJzLCBjb2RlLmpzLCBjb2RlLmh0bWwpOwogICAgICB9KTsKICAgIH0gZWxzZSB7CiAgICAgIG5ld1Z1ZShhdHRycywgY29kZS5qcywgY29kZS5odG1sKTsKICAgIH0KICB9Cn0KCmZ1bmN0aW9uIG5ld1Z1ZShhdHRycywgbWFpbiwgaHRtbCkgewogIG1haW4gPSBldmFsKCIoIi5jb25jYXQobWFpbiwgIikiKSk7CiAgbWFpbi50ZW1wbGF0ZSA9ICI8ZGl2PiIuY29uY2F0KGh0bWwsICI8L2Rpdj4iKTsKICBuZXcgVnVlKHsKICAgIGNvbXBvbmVudHM6IHsKICAgICAgY2hpbGQ6IG1haW4KICAgIH0sCiAgICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgICByZXR1cm4gewogICAgICAgIHZpc2libGU6IHRydWUKICAgICAgfTsKICAgIH0sCiAgICB0ZW1wbGF0ZTogIjxkaXY+PGNoaWxkICIuY29uY2F0KGF0dHJzLCAiLz48L2Rpdj4iKQogIH0pLiRtb3VudCgnI2FwcCcpOwp9"},{"version":3,"sources":["C:/Users/Administrator/Desktop/form-generator/src/views/preview/main.js"],"names":["Vue","loadScriptQueue","axios","Tinymce","component","prototype","$axios","$previewApp","document","getElementById","childAttrs","file","dialog","window","addEventListener","init","buildLinks","links","strs","forEach","url","event","data","type","code","attrs","generateConf","Array","isArray","length","innerHTML","css","scripts","newVue","js","html","main","eval","template","components","child","visible","$mount"],"mappings":";;;;;;AAAA,OAAOA,GAAP,MAAgB,KAAhB;AACA,SAASC,eAAT,QAAgC,oBAAhC;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,OAAP,MAAoB,gCAApB;AAEAH,GAAG,CAACI,SAAJ,CAAc,SAAd,EAAyBD,OAAzB;AACAH,GAAG,CAACK,SAAJ,CAAcC,MAAd,GAAuBJ,KAAvB;AAEA,IAAMK,WAAW,GAAGC,QAAQ,CAACC,cAAT,CAAwB,YAAxB,CAApB;AACA,IAAMC,UAAU,GAAG;AACjBC,EAAAA,IAAI,EAAE,EADW;AAEjBC,EAAAA,MAAM,EAAE;AAFS,CAAnB;AAKAC,MAAM,CAACC,gBAAP,CAAwB,SAAxB,EAAmCC,IAAnC,EAAyC,KAAzC;;AAEA,SAASC,UAAT,CAAoBC,KAApB,EAA2B;AACzB,MAAIC,IAAI,GAAG,EAAX;AACAD,EAAAA,KAAK,CAACE,OAAN,CAAc,UAAAC,GAAG,EAAI;AACnBF,IAAAA,IAAI,2BAAmBE,GAAnB,2BAAJ;AACD,GAFD;AAGA,SAAOF,IAAP;AACD;;AAED,SAASH,IAAT,CAAcM,KAAd,EAAqB;AACnB,MAAIA,KAAK,CAACC,IAAN,CAAWC,IAAX,KAAoB,cAAxB,EAAwC;AACtC,QAAMC,IAAI,GAAGH,KAAK,CAACC,IAAN,CAAWA,IAAxB;AACA,QAAMG,KAAK,GAAGf,UAAU,CAACc,IAAI,CAACE,YAAL,CAAkBH,IAAnB,CAAxB;AACA,QAAIN,KAAK,GAAG,EAAZ;;AAEA,QAAIU,KAAK,CAACC,OAAN,CAAcJ,IAAI,CAACP,KAAnB,KAA6BO,IAAI,CAACP,KAAL,CAAWY,MAAX,GAAoB,CAArD,EAAwD;AACtDZ,MAAAA,KAAK,GAAGD,UAAU,CAACQ,IAAI,CAACP,KAAN,CAAlB;AACD;;AAEDV,IAAAA,WAAW,CAACuB,SAAZ,aAA2Bb,KAA3B,oBAA0CO,IAAI,CAACO,GAA/C;;AAEA,QAAIJ,KAAK,CAACC,OAAN,CAAcJ,IAAI,CAACQ,OAAnB,KAA+BR,IAAI,CAACQ,OAAL,CAAaH,MAAb,GAAsB,CAAzD,EAA4D;AAC1D5B,MAAAA,eAAe,CAACuB,IAAI,CAACQ,OAAN,EAAe,YAAM;AAClCC,QAAAA,MAAM,CAACR,KAAD,EAAQD,IAAI,CAACU,EAAb,EAAiBV,IAAI,CAACW,IAAtB,CAAN;AACD,OAFc,CAAf;AAGD,KAJD,MAIO;AACLF,MAAAA,MAAM,CAACR,KAAD,EAAQD,IAAI,CAACU,EAAb,EAAiBV,IAAI,CAACW,IAAtB,CAAN;AACD;AACF;AACF;;AAED,SAASF,MAAT,CAAgBR,KAAhB,EAAuBW,IAAvB,EAA6BD,IAA7B,EAAmC;AACjCC,EAAAA,IAAI,GAAGC,IAAI,YAAKD,IAAL,OAAX;AACAA,EAAAA,IAAI,CAACE,QAAL,kBAAwBH,IAAxB;AACA,MAAInC,GAAJ,CAAQ;AACNuC,IAAAA,UAAU,EAAE;AACVC,MAAAA,KAAK,EAAEJ;AADG,KADN;AAINd,IAAAA,IAJM,kBAIC;AACL,aAAO;AACLmB,QAAAA,OAAO,EAAE;AADJ,OAAP;AAGD,KARK;AASNH,IAAAA,QAAQ,wBAAiBb,KAAjB;AATF,GAAR,EAUGiB,MAVH,CAUU,MAVV;AAWD","sourcesContent":["import Vue from 'vue'\nimport { loadScriptQueue } from '@/utils/loadScript'\nimport axios from 'axios'\nimport Tinymce from '@/components/tinymce/index.vue'\n\nVue.component('tinymce', Tinymce)\nVue.prototype.$axios = axios\n\nconst $previewApp = document.getElementById('previewApp')\nconst childAttrs = {\n  file: '',\n  dialog: ' width=\"600px\" class=\"dialog-width\" v-if=\"visible\" :visible.sync=\"visible\" :modal-append-to-body=\"false\" '\n}\n\nwindow.addEventListener('message', init, false)\n\nfunction buildLinks(links) {\n  let strs = ''\n  links.forEach(url => {\n    strs += `<link href=\"${url}\" rel=\"stylesheet\">`\n  })\n  return strs\n}\n\nfunction init(event) {\n  if (event.data.type === 'refreshFrame') {\n    const code = event.data.data\n    const attrs = childAttrs[code.generateConf.type]\n    let links = ''\n\n    if (Array.isArray(code.links) && code.links.length > 0) {\n      links = buildLinks(code.links)\n    }\n\n    $previewApp.innerHTML = `${links}<style>${code.css}</style><div id=\"app\"></div>`\n\n    if (Array.isArray(code.scripts) && code.scripts.length > 0) {\n      loadScriptQueue(code.scripts, () => {\n        newVue(attrs, code.js, code.html)\n      })\n    } else {\n      newVue(attrs, code.js, code.html)\n    }\n  }\n}\n\nfunction newVue(attrs, main, html) {\n  main = eval(`(${main})`)\n  main.template = `<div>${html}</div>`\n  new Vue({\n    components: {\n      child: main\n    },\n    data() {\n      return {\n        visible: true\n      }\n    },\n    template: `<div><child ${attrs}/></div>`\n  }).$mount('#app')\n}\n"]}]}