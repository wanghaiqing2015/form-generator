{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\form-generator\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Administrator\\Desktop\\form-generator\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\Administrator\\Desktop\\form-generator\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrator\\Desktop\\form-generator\\src\\components\\tinymce\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\form-generator\\src\\components\\tinymce\\index.vue","mtime":1619538169694},{"path":"C:\\Users\\Administrator\\Desktop\\form-generator\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\form-generator\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\Administrator\\Desktop\\form-generator\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\form-generator\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC50by1zdHJpbmcuanMiOwovLwovLwovLwovLwppbXBvcnQgbG9hZFRpbnltY2UgZnJvbSAnQC91dGlscy9sb2FkVGlueW1jZSc7CmltcG9ydCB7IHBsdWdpbnMsIHRvb2xiYXIgfSBmcm9tICcuL2NvbmZpZyc7CmltcG9ydCB7IGRlYm91bmNlIH0gZnJvbSAndGhyb3R0bGUtZGVib3VuY2UnOwp2YXIgbnVtID0gMTsKZXhwb3J0IGRlZmF1bHQgewogIHByb3BzOiB7CiAgICBpZDogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6IGZ1bmN0aW9uIF9kZWZhdWx0KCkgewogICAgICAgIG51bSA9PT0gMTAwMDAgJiYgKG51bSA9IDEpOwogICAgICAgIHJldHVybiAidGlueW1jZSIuY29uY2F0KCtuZXcgRGF0ZSgpKS5jb25jYXQobnVtKyspOwogICAgICB9CiAgICB9LAogICAgdmFsdWU6IHsKICAgICAgZGVmYXVsdDogJycKICAgIH0KICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB0aW55bWNlSWQ6IHRoaXMuaWQKICAgIH07CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdmFyIF90aGlzID0gdGhpczsKCiAgICBsb2FkVGlueW1jZShmdW5jdGlvbiAodGlueW1jZSkgewogICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZ2xvYmFsLXJlcXVpcmUKICAgICAgcmVxdWlyZSgnLi96aF9DTicpOwoKICAgICAgdmFyIGNvbmYgPSB7CiAgICAgICAgc2VsZWN0b3I6ICIjIi5jb25jYXQoX3RoaXMudGlueW1jZUlkKSwKICAgICAgICBsYW5ndWFnZTogJ3poX0NOJywKICAgICAgICBtZW51YmFyOiAnZmlsZSBlZGl0IGluc2VydCB2aWV3IGZvcm1hdCB0YWJsZScsCiAgICAgICAgcGx1Z2luczogcGx1Z2lucywKICAgICAgICB0b29sYmFyOiB0b29sYmFyLAogICAgICAgIGhlaWdodDogMzAwLAogICAgICAgIGJyYW5kaW5nOiBmYWxzZSwKICAgICAgICBvYmplY3RfcmVzaXppbmc6IGZhbHNlLAogICAgICAgIGVuZF9jb250YWluZXJfb25fZW1wdHlfYmxvY2s6IHRydWUsCiAgICAgICAgcG93ZXJwYXN0ZV93b3JkX2ltcG9ydDogJ2NsZWFuJywKICAgICAgICBjb2RlX2RpYWxvZ19oZWlnaHQ6IDQ1MCwKICAgICAgICBjb2RlX2RpYWxvZ193aWR0aDogMTAwMCwKICAgICAgICBhZHZsaXN0X2J1bGxldF9zdHlsZXM6ICdzcXVhcmUnLAogICAgICAgIGFkdmxpc3RfbnVtYmVyX3N0eWxlczogJ2RlZmF1bHQnLAogICAgICAgIGRlZmF1bHRfbGlua190YXJnZXQ6ICdfYmxhbmsnLAogICAgICAgIGxpbmtfdGl0bGU6IGZhbHNlLAogICAgICAgIG5vbmJyZWFraW5nX2ZvcmNlX3RhYjogdHJ1ZQogICAgICB9OwogICAgICBjb25mID0gT2JqZWN0LmFzc2lnbihjb25mLCBfdGhpcy4kYXR0cnMpOwoKICAgICAgY29uZi5pbml0X2luc3RhbmNlX2NhbGxiYWNrID0gZnVuY3Rpb24gKGVkaXRvcikgewogICAgICAgIGlmIChfdGhpcy52YWx1ZSkgZWRpdG9yLnNldENvbnRlbnQoX3RoaXMudmFsdWUpOwoKICAgICAgICBfdGhpcy52TW9kZWwoZWRpdG9yKTsKICAgICAgfTsKCiAgICAgIHRpbnltY2UuaW5pdChjb25mKTsKICAgIH0pOwogIH0sCiAgZGVzdHJveWVkOiBmdW5jdGlvbiBkZXN0cm95ZWQoKSB7CiAgICB0aGlzLmRlc3Ryb3lUaW55bWNlKCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICB2TW9kZWw6IGZ1bmN0aW9uIHZNb2RlbChlZGl0b3IpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICAvLyDmjqfliLbov57nu63lhpnlhaXml7ZzZXRDb250ZW5055qE6Kem5Y+R6aKR546HCiAgICAgIHZhciBkZWJvdW5jZVNldENvbnRlbnQgPSBkZWJvdW5jZSgyNTAsIGVkaXRvci5zZXRDb250ZW50KTsKICAgICAgdGhpcy4kd2F0Y2goJ3ZhbHVlJywgZnVuY3Rpb24gKHZhbCwgcHJldlZhbCkgewogICAgICAgIGlmIChlZGl0b3IgJiYgdmFsICE9PSBwcmV2VmFsICYmIHZhbCAhPT0gZWRpdG9yLmdldENvbnRlbnQoKSkgewogICAgICAgICAgaWYgKHR5cGVvZiB2YWwgIT09ICdzdHJpbmcnKSB2YWwgPSB2YWwudG9TdHJpbmcoKTsKICAgICAgICAgIGRlYm91bmNlU2V0Q29udGVudC5jYWxsKGVkaXRvciwgdmFsKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgICBlZGl0b3Iub24oJ2NoYW5nZSBrZXl1cCB1bmRvIHJlZG8nLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXMyLiRlbWl0KCdpbnB1dCcsIGVkaXRvci5nZXRDb250ZW50KCkpOwogICAgICB9KTsKICAgIH0sCiAgICBkZXN0cm95VGlueW1jZTogZnVuY3Rpb24gZGVzdHJveVRpbnltY2UoKSB7CiAgICAgIGlmICghd2luZG93LnRpbnltY2UpIHJldHVybjsKICAgICAgdmFyIHRpbnltY2UgPSB3aW5kb3cudGlueW1jZS5nZXQodGhpcy50aW55bWNlSWQpOwoKICAgICAgaWYgKHRpbnltY2UpIHsKICAgICAgICB0aW55bWNlLmRlc3Ryb3koKTsKICAgICAgfQogICAgfQogIH0KfTs="},{"version":3,"sources":["index.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <textarea :id=\"tinymceId\" style=\"visibility: hidden\" />\n</template>\n\n<script>\nimport loadTinymce from '@/utils/loadTinymce'\nimport { plugins, toolbar } from './config'\nimport { debounce } from 'throttle-debounce'\n\nlet num = 1\n\nexport default {\n  props: {\n    id: {\n      type: String,\n      default: () => {\n        num === 10000 && (num = 1)\n        return `tinymce${+new Date()}${num++}`\n      }\n    },\n    value: {\n      default: ''\n    }\n  },\n  data() {\n    return {\n      tinymceId: this.id\n    }\n  },\n  mounted() {\n    loadTinymce(tinymce => {\n      // eslint-disable-next-line global-require\n      require('./zh_CN')\n      let conf = {\n        selector: `#${this.tinymceId}`,\n        language: 'zh_CN',\n        menubar: 'file edit insert view format table',\n        plugins,\n        toolbar,\n        height: 300,\n        branding: false,\n        object_resizing: false,\n        end_container_on_empty_block: true,\n        powerpaste_word_import: 'clean',\n        code_dialog_height: 450,\n        code_dialog_width: 1000,\n        advlist_bullet_styles: 'square',\n        advlist_number_styles: 'default',\n        default_link_target: '_blank',\n        link_title: false,\n        nonbreaking_force_tab: true\n      }\n      conf = Object.assign(conf, this.$attrs)\n      conf.init_instance_callback = editor => {\n        if (this.value) editor.setContent(this.value)\n        this.vModel(editor)\n      }\n      tinymce.init(conf)\n    })\n  },\n  destroyed() {\n    this.destroyTinymce()\n  },\n  methods: {\n    vModel(editor) {\n      // 控制连续写入时setContent的触发频率\n      const debounceSetContent = debounce(250, editor.setContent)\n      this.$watch('value', (val, prevVal) => {\n        if (editor && val !== prevVal && val !== editor.getContent()) {\n          if (typeof val !== 'string') val = val.toString()\n          debounceSetContent.call(editor, val)\n        }\n      })\n\n      editor.on('change keyup undo redo', () => {\n        this.$emit('input', editor.getContent())\n      })\n    },\n    destroyTinymce() {\n      if (!window.tinymce) return\n      const tinymce = window.tinymce.get(this.tinymceId)\n      if (tinymce) {\n        tinymce.destroy()\n      }\n    }\n  }\n}\n</script>\n"],"sourceRoot":"src/components/tinymce"}]}